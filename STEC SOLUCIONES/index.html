<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STEC Soluciones | Tecnología Premium</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Orbitron:wght@600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>

    <div id="toast">Notificación</div>

    <header>
        <div class="brand-container" onclick="window.scrollTo(0,0)">
            <div class="logo-text"><span class="logo-main">STEC</span><span class="logo-sub">SOLUCIONES</span></div>
        </div>
        <div class="search-bar-header">
            <input type="text" id="search-header" placeholder="¿Qué estás buscando?" onkeyup="window.buscarProductoCliente()">
            <i class="fa-solid fa-magnifying-glass"></i>
        </div>
        <nav>
            <button onclick="window.verCarrito()" class="btn-icon cart-btn"><i class="fa-solid fa-cart-shopping"></i><span id="cart-count">0</span></button>
            <button onclick="window.irAlLogin()" class="btn-icon admin-btn"><i class="fa-solid fa-user-shield"></i></button>
        </nav>
    </header>

    <section class="hero">
        <div class="hero-carousel" id="hero-carousel"></div>
        <div class="hero-content"><h2></h2><p></p></div>
    </section>

    <main id="shop">
        <div class="category-bar">
            <button onclick="window.filtrar('todo')" class="cat-btn active">Todo</button>
            <button onclick="window.filtrar('laptops')" class="cat-btn"><i class="fa-solid fa-laptop"></i> Laptops</button>
            <button onclick="window.filtrar('impresoras')" class="cat-btn"><i class="fa-solid fa-print"></i> Impresoras</button>
            <button onclick="window.filtrar('accesorios')" class="cat-btn"><i class="fa-solid fa-keyboard"></i> Accesorios</button>
            <button onclick="window.filtrar('camaras')" class="cat-btn"><i class="fa-solid fa-video"></i> Cámaras</button>
        </div>
        <div id="grid-productos" class="grid"></div>
    </main>

    <div id="modal-carrito" class="modal">
        <div class="modal-content">
            <div class="modal-header"><h3>Tu Carrito</h3><span onclick="window.cerrarModal('modal-carrito')" class="close-icon">&times;</span></div>
            <div id="carrito-items"></div>
            <div class="modal-footer">
                <div class="total">Total: <span id="cart-total">S/ 0.00</span></div>
                <input type="text" id="cliente-nombre" placeholder="Tu Nombre Completo" class="input-tech">
                <button onclick="window.enviarPedido()" class="btn-whatsapp"><i class="fa-brands fa-whatsapp"></i> Pedir</button>
                <button onclick="window.cerrarModal('modal-carrito')" class="btn-danger" style="margin-top:10px; width:100%">Cerrar</button>
            </div>
        </div>
    </div>

    <div id="modal-login" class="modal">
        <div class="modal-content small">
            <span onclick="window.cerrarModal('modal-login')" class="close-icon-absolute">&times;</span>
            
            <h3>Acceso Administrativo</h3>
            
            <input type="text" id="login-user" placeholder="Usuario" class="input-tech">
            
            <input type="password" id="admin-pass" placeholder="Contraseña" class="input-tech">
            
            <button onclick="window.login()" class="btn-primary">Ingresar</button>
            
            </div>
    </div>

    <div id="subirImagenModal" class="modal">
        <div class="modal-content small">
            <h3>Imagen Producto</h3>
            <input type="file" id="archivoEditarInput" accept="image/*" class="input-tech">
            <button onclick="window.confirmarCambioImagen()" class="btn-success" style="width:100%">Guardar</button>
            <button onclick="window.cerrarModal('subirImagenModal')" class="btn-danger" style="margin-top:10px; width:100%">Cancelar</button>
        </div>
    </div>

    <div id="modal-ticket" class="modal">
        <div class="ticket-interface">
            <div id="area-impresion" class="ticket-paper">
                <div class="ticket-header">
                    <h2 class="brand-print">STEC <span>SOLUCIONES</span></h2>
                    <p>RUC: 10203040501</p>
                    <p>Cel: 961 996 631</p>
                    <p>Huancayo - Perú</p>
                    <div class="divider"></div>
                    <h3>ORDEN DE SERVICIO</h3>
                    <p><strong>N° Ticket:</strong> <span id="print-id">0000</span></p>
                    <p><strong>Fecha:</strong> <span id="print-fecha">--/--/----</span></p>
                </div>
                <div class="ticket-body">
                    <div class="info-row"><span>Cliente:</span> <strong id="print-cliente">---</strong></div>
                    <div class="info-row"><span>DNI:</span> <span id="print-dni">---</span></div>
                    <div class="info-row"><span>Teléfono:</span> <span id="print-tel">---</span></div>
                    <div class="divider-dashed"></div>
                    <div class="info-row"><span>Equipo:</span> <strong id="print-equipo">---</strong></div>
                    <div class="info-row"><span>Pass:</span> <span id="print-pass">---</span></div>
                    <div class="falla-box"><span>Falla:</span><p id="print-falla">---</p></div>
                    <div class="divider-dashed"></div>
                    <div class="money-row"><span>Total:</span> <span>S/ <span id="print-total">0.00</span></span></div>
                    <div class="money-row"><span>A Cuenta:</span> <span>S/ <span id="print-acuenta">0.00</span></span></div>
                    <div class="money-row total-big"><span>SALDO:</span> <span>S/ <span id="print-saldo">0.00</span></span></div>
                </div>
                <div class="ticket-footer">
                    <p class="terms">* 30 días de garantía.<br>* Pasados 30 días sin recoger, se cobra almacenaje (S/ 20/mes).<br>* A los 90 días abandono legal.</p>
                    <div class="firma-line">Firma Cliente</div>
                </div>
            </div>
            <div class="ticket-controls no-print">
                <button onclick="window.imprimirTicket()" class="btn-print"><i class="fa-solid fa-print"></i> Imprimir</button>
                <button onclick="window.cerrarModal('modal-ticket')" class="btn-cancel"><i class="fa-solid fa-xmark"></i> Cancelar</button>
            </div>
        </div>
    </div>

    <div id="panel-admin" class="admin-panel" style="display:none;">
        <nav class="admin-nav">
            <div class="admin-brand">DASHBOARD <span>STEC</span></div>
            <div class="admin-tabs">
                <button onclick="window.cambiarVistaAdmin('inventario')" id="tab-inventario" class="tab-btn active"><i class="fa-solid fa-boxes-stacked"></i> Inventario</button>
                <button onclick="window.cambiarVistaAdmin('soporte')" id="tab-soporte" class="tab-btn"><i class="fa-solid fa-screwdriver-wrench"></i> Soporte Técnico</button>
            </div>
            <button onclick="window.salirAdmin()" class="btn-danger-outline"><i class="fa-solid fa-power-off"></i></button>
        </nav>
        
        <div class="admin-container">
            <div id="view-inventario">
                <div class="admin-workspace">
                    <div class="admin-card main-form">
                        <div class="card-header"><h4><i class="fa-solid fa-circle-plus"></i> Nuevo Producto</h4></div>
                        <div class="card-body">
                            <div class="form-grid-products">
                                <input type="text" id="new-name" placeholder="Nombre" style="grid-column: span 2;">
                                <input type="text" id="new-marca" placeholder="Marca">
                                <select id="new-cat" onchange="window.toggleLaptopFields()">
                                    <option value="laptops">Laptops</option>
                                    <option value="impresoras">Impresoras</option>
                                    <option value="accesorios">Accesorios</option>
                                    <option value="camaras">Cámaras</option>
                                    <option value="otros">Otros</option>
                                </select>
                                <input type="number" id="new-price" placeholder="Precio">
                                <input type="number" id="new-stock" placeholder="Stock">
                                <div id="laptop-specs" class="specs-box" style="grid-column: 1/-1;">
                                    <h5 class="specs-title">Especificaciones Laptop</h5>
                                    <div class="specs-grid">
                                        <input type="text" id="spec-proc" placeholder="Procesador">
                                        <input type="text" id="spec-ram" placeholder="RAM">
                                        <input type="text" id="spec-almacen" placeholder="Almacenamiento">
                                        <input type="text" id="spec-pantalla" placeholder="Pantalla">
                                    </div>
                                </div>
                                <button onclick="window.crearProducto()" class="btn-success" style="grid-column: 1/-1;">Guardar</button>
                            </div>
                        </div>
                    </div>
                    <div class="admin-sidebar">
                        <div class="admin-card">
                            <div class="card-header"><h4><i class="fa-solid fa-images"></i> Banners</h4></div>
                            <div class="card-body">
                                <input type="file" id="slide-file" accept="image/*" class="input-tech">
                                <input type="text" id="slide-text" placeholder="Texto Banner" class="input-tech">
                                <button onclick="window.guardarSlide()" class="btn-primary">Subir Banner</button>
                                <div id="lista-slides-admin" class="slides-preview-list"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="admin-card full-width">
                    <div class="card-header">
                        <h4><i class="fa-solid fa-list-check"></i> Inventario Global</h4>
                        <input type="text" id="buscadorAdmin" placeholder="Buscar..." onkeyup="window.buscarProductoAdmin()" class="search-admin">
                    </div>
                    <div class="table-responsive">
                        <table id="admin-table">
                            <thead><tr><th>Producto</th><th>Detalles</th><th>Precio</th><th>Stock</th><th>Gestión</th></tr></thead>
                            <tbody id="admin-tbody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="view-soporte" style="display: none;">
                <div class="admin-workspace">
                    <div class="admin-card main-form">
                        <div class="card-header"><h4 style="color:var(--stec-blue);"><i class="fa-solid fa-clipboard-user"></i> Recepción</h4></div>
                        <div class="card-body">
                            <div class="form-grid-products">
                                <input type="text" id="rep-cliente" placeholder="Nombre Cliente">
                                <input type="number" id="rep-dni" placeholder="DNI (8 dígitos)" class="input-tech" oninput="if(this.value.length > 8) this.value = this.value.slice(0,8);">
                                <input type="text" id="rep-telefono" placeholder="Teléfono">
                                <input type="text" id="rep-equipo" placeholder="Equipo">
                                <input type="text" id="rep-pass" placeholder="Pass/Patrón">
                                <textarea id="rep-falla" placeholder="Falla..." class="input-tech" style="grid-column: 1/-1; height: 50px;"></textarea>
                                <input type="text" id="rep-costo" placeholder="Costo Total">
                                <input type="text" id="rep-adelanto" placeholder="Adelanto S/.">
                                <button onclick="window.crearTicket()" class="btn-success" style="grid-column: 1/-1;">Generar Ticket</button>
                            </div>
                        </div>
                    </div>
                    <div class="admin-sidebar">
                        <div class="stat-card"><div class="stat-icon blue"><i class="fa-solid fa-tools"></i></div><div class="stat-info"><span class="stat-label">En Taller</span><span class="stat-num" id="stat-taller">0</span></div></div>
                        <div class="stat-card" style="margin-top:15px;"><div class="stat-icon green"><i class="fa-solid fa-check"></i></div><div class="stat-info"><span class="stat-label">Listos</span><span class="stat-num" id="stat-listos">0</span></div></div>
                    </div>
                </div>
                <div class="admin-card full-width">
                    <div class="card-header">
                        <h4><i class="fa-solid fa-file-invoice"></i> Tickets</h4>
                        <input type="text" id="buscadorSoporte" placeholder="Buscar por DNI..." onkeyup="window.renderSupportTable()" class="search-admin">
                    </div>
                    <div class="table-responsive">
                        <table id="soporte-table">
                            <thead><tr><th>Estado</th><th>Cliente (DNI)</th><th>Equipo</th><th>Pagos</th><th>Acciones</th></tr></thead>
                            <tbody id="soporte-tbody"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <a href="https://wa.me/51961996631" class="btn-wsp-flotante" target="_blank"><i class="fa-brands fa-whatsapp"></i> Soporte</a>
    <script src="script.js"></script>
</body>
</html>